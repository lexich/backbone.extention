/*
backbone.extention - v0.0.2 - 
2013-10-07 
author: lexich
*/
(function(){Backbone.View.prototype.extention={__super__ensureElement:Backbone.View.prototype._ensureElement,initPtr:function(){return null!=this.VIEW_PTR?this.$el.data(this.VIEW_PTR,this):void 0},initTemplateLoader:function(){var $templateEl;if(null!=this.templatePath)return $templateEl=$(this.templatePath),(this.template_content=$templateEl.html())?this.$el.html(this.template_content):void 0},initImgLoadAnimation:function($imgs,options){var _this=this;return null==options&&(options=this.imgLoadAnimation),null!=this.options?(null==$imgs&&($imgs=this.$el.find("img")),_.each(options,function(opt,selector){var $item;return $item="this"===selector||"self"===selector?_this.$el:$(selector,_this.$el),null!=opt.defaultClass&&$item.addClass(opt.defaultClass),null!=opt.defaultCSS?$item.css(opt.defaultCSS):void 0}),$imgs.load(_.bind(this.extention.eventImgLoadAnimation,this))):void 0},initDomLinks:function(){var _this=this;if(null!=this.domLinks)return this.$d={},_.each(this.domLinks,function(selector,name){return _this.$d[name]=$(selector,_this.$el)}),this.d=function(name){return $(this.domLinks[name],this.$el)}},eventImgLoadAnimation:function(e){var $img,_this=this;return $img=$(e.target),_.each(this.imgLoadAnimation,function(opt,selector){var $item,className,jsOptions;return $item="this"===selector||"self"===selector?_this.$el:$(selector,_this.$el),null!=opt.css&&(className=_.isString(opt.css)?opt.css:opt.css["class"]||"",$item.addClass(className)),null!=opt.js?(jsOptions=_.defaults({properties:{opacity:1},duration:400,easing:"swing",complete:function(){}},opt.js),_.isString(jsOptions.complete)&&(jsOptions.complete=_.bind(_this[jsOptions.complete],_this)),$item.animate(jsOptions.properties,_.omit(jsOptions,"properties"))):void 0})}},Backbone.View.prototype._ensureElement=function(){return this.extention.__super__ensureElement.call(this),this.extention.initPtr.call(this),this.extention.initTemplateLoader.call(this),this.extention.initDomLinks.call(this),this.extention.initImgLoadAnimation.call(this)}}).call(this);